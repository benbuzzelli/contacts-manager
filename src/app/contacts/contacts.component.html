<div class="center card-custom">
    <mat-card class="mat-form-field">
        <form [formGroup]="createContactForm">
            <mat-toolbar style="background-color:transparent; padding: 0px;" class="center">
                <button class="dropdown-btn" style="padding-bottom: 10px;">
                    <mat-icon>keyboard_backspace</mat-icon>
                </button>
                <mat-card-header class="center" style="width: 85%;">
                    <mat-card-title>Create New Contact</mat-card-title>
                </mat-card-header>
                <button class="dropdown-btn" style="padding-bottom: 10px;" (click)="createContact()">
                    <mat-icon>check</mat-icon>
                </button>
            </mat-toolbar>
            <p class="center-right">
                <mat-form-field class="full-width-field" style="padding-left: 10%;" *ngIf="!dropdownToggle" appearance="legacy">
                    <mat-label>Name</mat-label>
                    <input matInput [(value)]="fullName.fullName" #primaryName type="text" (keyup)="setNameValues(primaryName.value)">
                </mat-form-field>
                <mat-form-field class="full-width-field" style="padding-left: 10%;" *ngIf="dropdownToggle" appearance="legacy">
                    <input matInput [(value)]="fullName.prefix" #prefix type="text" placeholder="Prefix"
                    (keyup)="setPrefix(prefix.value)">
                </mat-form-field>
                <button class="dropdown-btn" [(value)]="dropdownToggle" (click)="toggleDropdown()">
                    <mat-icon>
                        expand_more</mat-icon>
                </button>
            </p>
            <p *ngIf="dropdownToggle" class="center-col">
                <mat-form-field class="full-width-field" appearance="legacy">
                    <input matInput [(value)]="fullName.firstName" #firstName type="text" placeholder="First name"
                    (keyup)="setFirst(firstName.value)">
                </mat-form-field><br>
                <mat-form-field class="full-width-field" appearance="legacy">
                    <input matInput [(value)]="fullName.middleName" #middleName type="text" placeholder="Middle name"
                    (keyup)="setMiddle(middleName.value)">
                </mat-form-field><br>
                <mat-form-field class="full-width-field" appearance="legacy">
                    <input matInput [(value)]="fullName.lastName" #lastName type="text" placeholder="Last name"
                    (keyup)="setLast(lastName.value)">
                </mat-form-field><br>
                <mat-form-field class="full-width-field" appearance="legacy">
                    <input matInput [(value)]="fullName.suffix" #suffix type="text" placeholder="Suffix"
                    (keyup)="setSuffix(suffix.value)">
                </mat-form-field>
            </p>
            <p formArrayName="phoneNumbers"
            *ngFor="let phoneNumber of createContactForm.get('phoneNumbers').controls; let i = index;" class="center">
                <span [formGroupName]="i" class="center">
                    <mat-form-field class="card-type-email-phone">
                        <mat-select formControlName="type" [(value)]="phoneTypeSelected">
                            <mat-option *ngFor="let type of phoneTypes" [value]="type.value">
                                {{type.viewValue}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field appearance="legacy" class="card-email-phone">
                        <input formControlName="value" (keyup)="handlePhoneNumbersArray(phone.value)" matInput #phone type="tel" class="form-control mb-2" placeholder="Phone #">
                    </mat-form-field>
                </span>
            </p>
            <p class="center">
                <mat-form-field class="card-type-email-phone">
                    <mat-select [(value)]="emailTypeSelected">
                        <mat-option *ngFor="let type of emailTypes" [value]="type.value">
                            {{type.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field appearance="legacy" class="card-email-phone">
                    <input matInput #email type="text" placeholder="Email">
                </mat-form-field>
            </p>
            <!-- <p class="center">
                <button mat-button color="primary" 
                                class="btn btn-lg btn-primary btn-block mb-1" 
                                type="submit" 
                                (click)="createContact(phone.value, email.value)">Create Contact</button>
            </p>
            <p class="center">
                <button mat-button color="primary" 
                                class="btn btn-lg btn-primary btn-block mb-1" 
                                type="submit" 
                                (click)="showContacts()">Show Contacts</button>
            </p> -->
            <!-- <ul>
                <mat-list *ngFor="let contact of contacts$ | async">
                    {{ contact.firstName }} {{ contact.lastName }}<br>
                    {{ contact.phone }}<br>
                    {{ contact.email }}
                </mat-list>
            </ul> -->
        </form>
    </mat-card>
</div>